<!-- Profile Card -->
<section class="card relative flex flex-col sm:flex-row items-center space-y-6 sm:space-y-0 sm:space-x-8 p-6 sm:p-8 bg-[var(--card-bg)] border-2 border-transparent bg-clip-padding rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300" style="background: linear-gradient(var(--card-bg), var(--card-bg)) padding-box, var(--accent-gradient) border-box;">
    <!-- Profile Image -->
    <div class="relative group">
        <img src="{{ data.avatar_url }}" alt="Profile Picture" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full border-4 border-[var(--accent-primary)] shadow-lg object-cover transition-transform duration-300 group-hover:scale-105" aria-label="User profile picture">
        <div class="absolute inset-0 rounded-full bg-[var(--accent-primary)] opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
        {% if data.public_profile_url %}
            <a href="{{ data.public_profile_url }}" target="_blank" rel="noopener" class="absolute -bottom-2 -right-2 bg-green-500 text-white text-xs font-semibold px-2 py-1 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 sm:text-sm hover:bg-green-600" aria-label="View public profile on Cloud Skills Boost">View Profile</a>
        {% else %}
            <span class="absolute -bottom-2 -right-2 bg-gray-500 text-white text-xs font-semibold px-2 py-1 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 sm:text-sm cursor-not-allowed" aria-label="Public profile URL not available">View Profile</span>
        {% endif %}
    </div>

    <!-- Profile Info -->
    <div class="text-center sm:text-left space-y-3">
        <h1 class="text-2xl sm:text-4xl font-extrabold tracking-tight text-[var(--text-color)] animate-fade-in" aria-label="User name">{{ data.user_name }}</h1>
        <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0">
            <p class="text-[var(--secondary-text)] text-sm sm:text-base font-medium">
                <i class="fas fa-star text-yellow-400 mr-1"></i>
                Arcade Points: <span class="font-bold text-[var(--accent-primary)]">{{ data.points.total_points }}</span>
            </p>
            <p class="text-[var(--secondary-text)] text-sm sm:text-base font-medium">
                <i class="fas fa-trophy text-yellow-400 mr-1"></i>
                Total Badges: <span class="font-bold text-[var(--accent-primary)]">{{ data.badge_counts.total_badges }}</span>
            </p>
        </div>
        <p class="text-[var(--secondary-text)] text-sm sm:text-base font-medium">
            <i class="fas fa-flag-checkered text-yellow-400 mr-1"></i>
            Milestone: <span class="font-bold text-[var(--accent-primary)]">{{ data.points.milestone }}</span>
        </p>
        <div class="mt-3 relative group">
            <p class="text-[var(--secondary-text)] text-sm sm:text-base font-medium" aria-live="polite">
                <i class="fas fa-user-check text-yellow-400 mr-1"></i>
                Facilitator Status: 
                {% if data.is_facilitator %}
                    <span class="text-green-500 font-semibold">Registered</span>
                    <span class="text-green-400 text-xs sm:text-sm">(Bonus: {{ data.points.facilitator_bonus }} points)</span>
                {% else %}
                    <span class="text-red-500 font-semibold">Not Registered</span>
                {% endif %}
            </p>
            <!-- Tooltip for Facilitator Status -->
            <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-800 text-white text-xs sm:text-sm rounded-lg py-2 px-4 shadow-lg z-10 w-max max-w-xs transition-opacity duration-200">
                {% if data.is_facilitator %}
                    You have registered under a facilitator! Enjoy bonus points for your contributions.
                {% else %}
                    Register registered under a facilitator to earn bonus points and exclusive rewards!
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Inline CSS for Profile Card -->
<style>
    /* Ensure smooth animations */
    .animate-fade-in {
        animation: fadeIn 0.6s ease-out forwards;
    }

    /* Gradient border compatibility */
    .card {
        border: 2px solid transparent;
        background-clip: padding-box, border-box;
        background-origin: padding-box, border-box;
    }

    /* Responsive adjustments */
    @media (max-width: 640px) {
        .card {
            padding: 1.5rem;
        }
        .card img {
            width: 20rem;
            height: 20rem;
        }
        .card h1 {
            font-size: 1.75rem;
        }
        .card p {
            font-size: 0.875rem;
        }
    }

    /* Accessibility: Focus styles */
    .card img:focus, .card div:focus, .card a:focus {
        outline: 2px solid var(--accent-primary);
        outline-offset: 2px;
    }

    /* Ensure tooltip visibility */
    .group:hover .group-hover\:block {
        display: block;
    }
</style>